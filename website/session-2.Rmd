---
title: "Session-2"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

### Aim { .session-start }

- Create reproducible report (HTML, PDF)
- Application of R in ecology with example
- Packages in R
- Plotting in R

# Rmarkdown

Lets discuss reproducible report.

# Ecology applications 

## Student's t-test

Check weather the observation we have are significantly differ from their mean.

### One sample t-test

Let have weight of birds from yesterdays survey. Suppose we have observation of weight always less than 70. Test the hypothesis now with this new data.

```{r}
wts <-c (50, 55, 60, 63, 65, 66, 72, 75, 80)
wts
```
```{r}
t.test(wts)
```
```{r, eval=F}
?t.test
```

```{r}
t.test(wts, alternative = "less", mu = 70, conf.level = 0.99)
```

### Two sample t-test

```{r}
wts <- c(50, 55, 60, 63, 65, 66, 72, 75)
wts_2 <- c(57, 63, 66, 72, 73, 80, 92, 95)
# independent 2-group t-test
ttest = t.test(wts,wts_2)
names(ttest)
```

### Paired t-test

```{r}
# paired t-test
t.test(wts,wts_2,paired=TRUE) 
```


## ANOVA

Create a dataframe
```{r}
df <- data.frame(cbind(wts, wts_2))
summary(df)
```

```{r}
wt_stack <- stack(df)
aov_res <- aov(formula = values ~ ind, data = wt_stack)
aov_res
```


Summary

```{r}
summary(aov_res)
```




## Correlation

```{r}
cor(mtcars)
```

# Packages

Packages are collection of several functions in R.

To use a particular function from a package, it need to be downloaded and loaded.

### Introduction to CRAN

This session introduces the essential of package discovery, installation, and use.

The web site at https://cran.r-project.org/ contains descriptions of all packages, as well as essential reference materials.

### Install a package from CRAN

```{r, eval=FALSE}
# download and install 'ggplot2' package from CRAN
install.packages("ggplot2")
```

A total of 2,400 packages comprising over 3,000 functions have been used in ecology and evolution, and the journal Methods in Ecology and Evolution for instance had the highest reported proportionate usage of all journals recently examined in a recent study (Lai et al., 2019). - [A checklist for choosing between R packages in ecology and evolution](https://onlinelibrary.wiley.com/doi/full/10.1002/ece3.5970)

![The number of R packages for common statistical and ecological/evolutionary concepts.](https://onlinelibrary.wiley.com/cms/asset/a2cdb32b-308f-4a80-a721-51674215292d/ece35970-fig-0001-m.png)

# Plotting

## Graphics
One of the main reasons data analysts turn to R is for its strong graphic capabilities.

## Creating a Graph
```{r plot_starts}
attach(mtcars)
plot(wt, mpg)
abline(lm(mpg~wt))
title("Regression of MPG on Weight")
```

Few plotting functions comes built-in when R installed. These can help do diffrent type of plots. Such as
  * Scater Plots
  * Dot Plots
  * Bar Plots
  * Pie Charts
  * Box Plots
  
## Scatter Plots
```{r}
plot(wt, mpg, main="Scatterplot Example",
   xlab="Car Weight ", ylab="Miles Per Gallon ", pch=19)
```
  
### Dot Plots
```{r}
dotchart(mtcars$mpg,labels=row.names(mtcars),cex=.7,
   main="Gas Milage for Car Models",
   xlab="Miles Per Gallon")
```

### Bar Plots

#### Simple Bar Plot
```{r}
counts <- table(mtcars$gear)
barplot(counts, main="Car Distribution",
   xlab="Number of Gears")
```

#### Stacked Bar Plot
```{r}
counts <- table(mtcars$vs, mtcars$gear)
barplot(counts, main="Car Distribution by Gears and VS",
  xlab="Number of Gears", col=c("darkblue","red"),
  legend = rownames(counts))
```

#### Grouped Bar Plot
```{r}
counts <- table(mtcars$vs, mtcars$gear)
barplot(counts, main="Car Distribution by Gears and VS",
  xlab="Number of Gears", col=c("darkblue","red"),
  legend = rownames(counts), beside=TRUE)
```

### Pie Charts

```{r}
slices <- c(10, 12,4, 16, 8)
lbls <- c("US", "UK", "Australia", "Germany", "France")
pie(slices, labels = lbls, main="Pie Chart of Countries")
```

### Box Plots

#### Simple Boxplot
```{r}
boxplot(mpg~cyl,data=mtcars, main="Car Milage Data",
   xlab="Number of Cylinders", ylab="Miles Per Gallon")
```

#### Notched Boxplot
```{r}
boxplot(len~supp*dose, data=ToothGrowth, notch=TRUE,
  col=(c("gold","darkgreen")),
  main="Tooth Growth", xlab="Suppliment and Dose")
```

## Customization
Graphical parameters describes how to change a graph's symbols, fonts, colors, and lines. Axes and text describe how to customize a graph's axes, add reference lines, text annotations and a legend. Combining plots describes how to organize multiple plots into a single graph.

```{r}
# Legend Example
attach(mtcars)
boxplot(mpg~cyl, main="Milage by Car Weight",
   yaxt="n", xlab="Milage", horizontal=TRUE,
   col=terrain.colors(3))
legend("topright", inset=.05, title="Number of Cylinders",
   c("4","6","8"), fill=terrain.colors(3), horiz=TRUE)
```
